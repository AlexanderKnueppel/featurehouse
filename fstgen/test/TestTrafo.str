module analyze

rules

  import-module :
    Import(qid) -> Import(qid)
    where (<ParsedAndImported> qid
           ; rules ( Imports :+= qid )
        <+ rules ( ParsedAndImported : qid )
         ; where(<open-import(\ path -> <resolve-file> <concat-strings> [path, ".mobl"] \, parse-file, externalize-module)> <qid-to-path> qid
             ; <declare-all> Module(qid, <id>))
         ; rules ( Imports :+= qid )
           )